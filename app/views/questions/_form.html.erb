<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading" style="text-align: center">
        Question
      </div>
      <div class="panel-body">
        <div class="row">
          <div class="col-lg-6">
            <%= form_for(@question) do |f| %>
              <% if @question.errors.any? %>
                <div id="error_explanation">
                  <h2><%= pluralize(@question.errors.count, "error") %> prohibited this question from being saved:</h2>

                  <ul>
                  <% @question.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                  </ul>
                </div>
              <% end %>

              <div class="field">
                <label>Description</label><br>
                <%= f.text_area :question, class: "form-control" %>
              </div>
              <div class="field">
                <label>Type</label><br>
                <%= f.select :typ, options_for_select(["number","choice"]), class: "form-control" %>
              </div>
              <div id="answer_div"></div>
              <a class='btn btn-success hidden' id='add_more_ans'>Add More Answer</a>
              </br></br>
              <div class="actions">
                <%= f.submit %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  $( document ).ready(function() {
    $('#question_typ').val('number'); //default this field to number on refresh
//    $('#answer_div').empty();
  });
    var counter = 0;
    $('#question_typ').change(function(){
      if($('#question_typ').val() == "choice") {
        $('#add_more_ans').removeClass("hidden");
        $('#answer_div').append("<div class='field'>" +
            "<label>Answer " + counter +"</label>" +
            "<textarea></textarea>" +
            "</div>"
        );
      }
      else{
        $('#add_more_ans').addClass("hidden");
        $('#answer_div').empty();
      }
    });
    $('#add_more_ans').click(function() {
      counter++;
      $('#answer_div').append("<div class='field'>" +
          "<label>Answer " + counter +"</label>" +
          "<textarea></textarea>" +
          "</div>"
      );
    });

</script>
